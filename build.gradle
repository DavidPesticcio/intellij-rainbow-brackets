buildscript {
    repositories {
        mavenCentral()
    }

    dependencies {
        classpath "org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlinVersion"
    }
}

plugins {
    id "org.jetbrains.intellij" version "0.2.17"
}

allprojects {

    apply plugin: "org.jetbrains.intellij"

    intellij {
        pluginName name

        version ideaVersion
        downloadSources Boolean.valueOf(downloadIdeaSources)
        updateSinceUntilBuild = false

        sandboxDirectory project.rootDir.canonicalPath + "/.sandbox"
    }

    apply plugin: "kotlin"

    sourceCompatibility = javaVersion
    targetCompatibility = javaVersion
    
    [compileJava, compileTestJava, javadoc]*.options*.encoding = 'UTF-8'

    jar.archiveName = "intellij-rainbow-brackets.jar"

    repositories {
        mavenCentral()
    }

    dependencies {
        compile "org.jetbrains.kotlin:kotlin-stdlib-jre8:$kotlinVersion"
        compile "org.jetbrains.kotlin:kotlin-runtime:$kotlinVersion"
    }

    publishPlugin {
        def publishPassword = "$System.env.publishPassword"
        username publishUsername
        password publishPassword
        channels publishChannels
    }
}

apply plugin: "idea"

idea {
    project {
        jdkName = javaVersion
        languageLevel = javaVersion
    }
}

version = version
